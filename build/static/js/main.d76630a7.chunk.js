(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(52),c=t.n(o),l=(t(60),t(61),t(16)),i=t(6),s=t.n(i),u=t(24),d=t(7),m=t(8),h=t(10),f=t(9),p=t(11),b=t(2),D=t.n(b),y=(t(36),t(65),function(e){var a=e.dTDate,t=e.dTValue,n=e.loadingDT;return r.a.createElement("h2",{className:"text-center"},n?"cargando...":"Dolar hoy ".concat(a," / $ ").concat(t))}),E=t(23);D.a.locale("es-ES");var v=function(e){function a(){var e;return Object(d.a)(this,a),(e=Object(h.a)(this,Object(f.a)(a).call(this))).handleInputDate=function(a){var t=a.target,n=t.value,r=t.name;e.setState(Object(E.a)({},r,n))},e.handleValidSubmit=function(){var a=!0,t=e.state,n=t.fechaIni,r=t.fechaEnd;return n?document.querySelector("#erroIni").classList.contains("fagError")&&(document.querySelector("#erroIni").style.display="none",a=!0):(document.querySelector("#erroIni").innerHTML="Debe ingresar una fecha de inicio",document.querySelector("#erroIni").style.display="block",document.querySelector("#erroIni").classList.add("fagError"),a=!1),r?document.querySelector("#erroEnd").classList.contains("fagError")&&(document.querySelector("#erroEnd").style.display="none",a=!0):(document.querySelector("#erroEnd").innerHTML="Debe ingresar una fecha de Fin",document.querySelector("#erroEnd").style.display="block",document.querySelector("#erroEnd").classList.add("fagError"),a=!1),a},e.handleSubmit=function(a){if(a.preventDefault(),e.handleValidSubmit()){var t=e.state,n=t.fechaIni,r=t.fechaEnd;e.props.handleSubmit({fechaIni:n,fechaEnd:r})}},e.state={fechaIni:"",fechaEnd:""},e}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header text-center"},r.a.createElement("h4",null,"Consulta en valor del dolar en un rango de fechas segun la SBIF")),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Fecha de inicio"),r.a.createElement("input",{type:"date",name:"fechaIni",className:"form-control",onChange:this.handleInputDate,placeholder:"Fecha Inicio",max:D()().format("YYYY-MM-DD")}),r.a.createElement("label",{id:"erroIni",className:"error"},"Errorrrr")),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Fecha de fin"),r.a.createElement("input",{type:"date",name:"fechaEnd",className:"form-control",onChange:this.handleInputDate,placeholder:"Responsible",max:D()().format("YYYY-MM-DD")}),r.a.createElement("label",{id:"erroEnd",className:"error"}))),r.a.createElement("div",{className:"text-center card-footer"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Consultar"))))}}]),a}(n.Component),g=t(53),Y=function(e){function a(){return Object(d.a)(this,a),Object(h.a)(this,Object(f.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props.dValues,a=0;e.forEach(function(e){a+=e});var t=Math.min.apply(null,e),n=Math.max.apply(null,e),o=a/e.length;return this.props.loadingChart?r.a.createElement("div",{className:"chart"},r.a.createElement(g.a,{data:this.props.chartData,options:{title:{display:this.props.displayTitle,text:"Monto mayor: $".concat(n,"  Monto menor: $").concat(t,"  Promedio: $").concat(o.toFixed(2)),fontSize:18},legend:{display:this.props.displayLegend,position:this.props.legendPosition}}})):r.a.createElement("h3",null,"Cargando Gr\xe1fica...")}}]),a}(n.PureComponent);Y.defaultProps={displayTitle:!0,displayLegend:!1,legendPosition:"right",location:"City"};var S=Y;D.a.locale("es-ES");var j="https://api.sbif.cl/api-sbifv3/recursos_api/dolar",M="?apikey=9c84db4d447c80c74961a72245371245cb7ac15f&formato=json",O=function(e){function a(){var e;return Object(d.a)(this,a),(e=Object(h.a)(this,Object(f.a)(a).call(this))).parseUrl=function(e){var a=e.fechaIni,t=e.fechaEnd,n=D()(a,"YYYY-MM-DD"),r=n.format("YYYY"),o=n.format("MM"),c=n.format("DD"),l=D()(t,"YYYY-MM-DD"),i=l.format("YYYY"),s=l.format("MM"),u=l.format("DD");return"".concat(j,"/periodo/").concat(r,"/").concat(o,"/dias_i/").concat(c,"/").concat(i,"/").concat(s,"/dias_f/").concat(u,"/").concat(M)},e.handleSubmit=function(){var a=Object(u.a)(s.a.mark(function a(t){var n,r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.parseUrl(t),a.next=3,e.fetchDolarsByDate(n);case 3:(r=a.sent).Dolares&&e.buildDataSet(r.Dolares);case 5:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.buildDataSet=function(a){var t=[],n=[],r=[],o=a.length;a.forEach(function(e){var a=e.Valor,o=e.Fecha;t.push(o),n.push(parseFloat(a.replace(",","."))),r.push("blue")});var c={labels:t,datasets:[{data:n,backgroundColor:["rgba(255, 99, 132, 0.6)"],borderColor:["rgba(255, 99, 132, 1)"],pointBackgroundColor:r}]};e.setState(function(e){return Object(l.a)({},e,{chartData:c,count:o,loadingChart:!0,dValues:n})})},e.fetchDolarsByDate=function(){var e=Object(u.a)(s.a.mark(function e(a){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a);case 2:if(!(t=e.sent)||200!==t.status){e.next=10;break}return e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:if(!t.CodigoError){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),e.fetchDolarToday=Object(u.a)(s.a.mark(function a(){var t,n,r,o,c,i,u,d,m,h,f,p;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState(function(e){return Object(l.a)({},e,{loadingDT:!0})}),t=D()(),n=t.format("YYYY"),r=t.format("MM"),o=t.format("DD"),a.next=7,fetch("".concat(j,"/").concat(n,"/").concat(r,"/dias/").concat(o,"/").concat(M));case 7:return c=a.sent,a.next=10,c.json();case 10:i=a.sent,void 0!==(u=i.Dolares)?(d=u[0],m=d.Fecha,h=d.Valor,f=D()(m,"YYYY-MM-DD").format("DD-MM-YYYY"),p=parseFloat(h.replace(",",".")),e.setState(function(e){return Object(l.a)({},e,{dTDate:f,dTValue:p,loadingDT:!1})})):e.setState(function(e){return Object(l.a)({},e,{loadingDT:!1})});case 13:case"end":return a.stop()}},a)})),e.state={chartData:[],count:0,dTDate:"",dTValue:"",loadingDT:!1,loadingChart:!1,dValues:[]},e}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchDolarToday()}},{key:"render",value:function(){var e=this.state,a=e.count,t=e.chartData,n=e.dTDate,o=e.dTValue,c=e.loadingDT,l=e.loadingChart,i=e.dValues;return r.a.createElement("div",{className:"container p-4 "},r.a.createElement("h1",null,this.props.title),r.a.createElement(y,{loadingDT:c,dTDate:n,dTValue:o}),r.a.createElement(v,{handleSubmit:this.handleSubmit}),a>0&&r.a.createElement(S,{chartData:t,dValues:i,loadingChart:l}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},55:function(e,a,t){e.exports=t(159)},61:function(e,a,t){},65:function(e,a,t){}},[[55,1,2]]]);
//# sourceMappingURL=main.d76630a7.chunk.js.map